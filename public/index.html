<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HERA MULTI-VIP</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 5px; text-align: center; margin: 0; }
        
        .search-box { margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        input[type="text"] { width: 90%; padding: 8px; background: #222; color: #fff; border: 1px solid #0f0; text-align: center; }
        button.btn-search { width: 95%; padding: 8px; margin-top: 5px; background: #004400; color: #fff; border: 1px solid #0f0; font-weight: bold; cursor: pointer; }

        .item { border: 1px solid #333; margin-bottom: 5px; padding: 5px; text-align: left; background: #111; }
        .item img { width: 60px; height: 45px; object-fit: cover; float: left; margin-right: 5px; border: 1px solid #555; }
        .item .title { font-size: 13px; color: white; display: block; overflow: hidden; height: 32px; }
        .item .time { font-size: 11px; color: #888; }
        .clear { clear: both; }

        .time-box { display: none; margin-top: 5px; border-top: 1px dashed #555; padding-top: 5px; }
        .time-inputs { display: flex; justify-content: center; gap: 5px; margin-bottom: 5px; }
        .time-inputs input { width: 30%; background: #333; color: yellow; border: 1px solid #555; text-align: center; font-size: 16px; }
        
        /* C√ÅC N√öT SERVER */
        .btn-sv { width: 100%; color: white; border: none; padding: 12px; cursor: pointer; font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        .sv1 { background: #0066cc; border: 1px solid #0099ff; } /* Nadeko - Uy t√≠n */
        .sv2 { background: #cc00cc; border: 1px solid #ff00ff; } /* ProjectSegfault - M·ªπ */
        .sv3 { background: #cc6600; border: 1px solid #ff9900; } /* Puffyan - D·ª± ph√≤ng */
        .sv4 { background: #333333; border: 1px solid #666666; color: #ccc; font-size: 11px; } /* G·ªëc */
    </style>
</head>
<body>

    <div class="search-box">
        <input type="text" id="keyword" placeholder="Nh·∫≠p t√™n video..." onkeypress="if(event.key=='Enter') timKiem()">
        <button class="btn-search" onclick="timKiem()">üîç T√åM KI·∫æM</button>
    </div>

    <div id="ketqua">
        <p style="color:#666">Nh·∫≠p t·ª´ kh√≥a...</p>
    </div>

    <script>
        async function timKiem() {
            var k = document.getElementById('keyword').value;
            if(!k) return;
            document.getElementById('ketqua').innerHTML = '<p style="color:yellow">ƒêang t√¨m...</p>';
            try {
                var res = await fetch('/tim-kiem?q=' + encodeURIComponent(k));
                var data = await res.json();
                var html = '';
                data.forEach(v => {
                    html += `
                    <div class="item">
                        <img src="${v.img}">
                        <span class="title">${v.title}</span>
                        <span class="time">‚è± ${v.time}</span>
                        <div class="clear"></div>
                        <button onclick="hienOnhap('${v.id}')" style="width:100%; margin-top:5px; background:#222; color:white; border:1px solid #444;">üîΩ CH·ªåN B√ÄI N√ÄY</button>
                        
                        <div id="box-${v.id}" class="time-box">
                            <div class="time-inputs">
                                <input type="number" id="m-${v.id}" placeholder="Ph√∫t" value="0">
                                <input type="number" id="s-${v.id}" placeholder="Gi√¢y" value="0">
                            </div>
                            
                            <button class="btn-sv sv1" onclick="moLink('${v.id}', 1)">üöÄ SERVER 1 (Nadeko)</button>
                            <button class="btn-sv sv2" onclick="moLink('${v.id}', 2)">üöÄ SERVER 2 (Segfault)</button>
                            <button class="btn-sv sv3" onclick="moLink('${v.id}', 3)">üöÄ SERVER 3 (Puffyan)</button>
                            <button class="btn-sv sv4" onclick="moLink('${v.id}', 4)">üê¢ Youtube G·ªëc (Ch·∫≠m)</button>
                        </div>
                    </div>`;
                });
                document.getElementById('ketqua').innerHTML = html;
            } catch (e) { document.getElementById('ketqua').innerHTML = '<p style="color:red">L·ªói m·∫°ng!</p>'; }
        }

        function hienOnhap(id) {
            document.querySelectorAll('.time-box').forEach(d => d.style.display = 'none');
            document.getElementById('box-' + id).style.display = 'block';
        }

        function moLink(id, serverType) {
            var m = document.getElementById('m-' + id).value || 0;
            var s = document.getElementById('s-' + id).value || 0;
            var total = (parseInt(m) * 60) + parseInt(s);
            var url = "";
            
            if (serverType === 1) {
                // inv.nadeko.net (R·∫•t n·ªïi ti·∫øng, th∆∞·ªùng ·ªïn ƒë·ªãnh)
                url = "https://inv.nadeko.net/watch?v=" + id + "&t=" + total + "&autoplay=1";
            } 
            else if (serverType === 2) {
                // invidious.projectsegfault.net (Server m·∫°nh)
                url = "https://invidious.projectsegfault.net/watch?v=" + id + "&t=" + total + "&autoplay=1";
            } 
            else if (serverType === 3) {
                // vid.puffyan.us (L√¢u ƒë·ªùi)
                url = "https://vid.puffyan.us/watch?v=" + id + "&t=" + total + "&autoplay=1";
            }
            else {
                // Youtube Embed (Backup cu·ªëi c√πng)
                url = "https://www.youtube-nocookie.com/embed/" + id + "?start=" + total + "&autoplay=1";
            }
            window.location.href = url;
        }
    </script>
</body>
</html>